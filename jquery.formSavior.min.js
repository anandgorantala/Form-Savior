(function(a){a.fn.formSavior=function(d){return this.each(function(){function e(){var b=c.serialize();a("input[type=file]").each(function(){b+=a(this).val()});return b}var b={msg:"There are unsaved changes on this form",noprompt:"fs_noprompt"};d&&a.extend(b,d);var f="",g=!0,c=a(this);$win=a(window);$doc=a(document);a("."+b.noprompt).live("click",function(){a(this).closest("form").addClass(b.noprompt)});$doc.ready(function(){f=e()});c.submit(function(){g=!1});$win.bind("beforeunload",function(){current=e();if(current!=f&&!0===g&&!c.hasClass(b.noprompt))return b.msg})})}})(jQuery);